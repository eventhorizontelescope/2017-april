#!/usr/bin/env python

import sys
import pandas as pd

# Read stdin to a Pandas DataFrame
df1 = pd.read_table(sys.argv[1], header=None, sep='\s+')
df2 = pd.read_table(sys.argv[2], header=None, sep='\s+')

if len(df1) != len(df2):
    raise Exception("Lengths of df1 and df2 don't match")

for i in range(len(df1)):
    if df1.iloc[i,0] != df2.iloc[i,0]:
        raise Exception("Baselines don't match")
    r1 = df1.iloc[i,1:]
    r2 = df2.iloc[i,1:]
    df1.iloc[i,1:] = 0.5 * (r1 + r2)

df1.to_csv(sys.stdout, index=False, header=False, sep=" ", float_format="%.9g")
